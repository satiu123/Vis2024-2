# ChinaVis2024 就业招聘市场数据可视化项目规划

## 一、项目概述

### 1.1 项目背景
- **数据集**: 虚拟就业招聘市场数据集
- **数据规模**: 430,664条招聘通知
- **数据维度**: 169,540种职位、267,296家企业、158个行业类别、371个行政区划
- **核心字段**: 职位名称、城市、薪酬、经验要求、学历要求、企业、行业类别

### 1.2 项目目标
基于D3.js可视化平台，结合Echarts，完成一个具有深度数据分析能力的就业招聘市场可视化作品，探索：
- 不同城市的就业市场分布特征
- 薪资水平与学历、经验的关系
- 行业发展趋势与人才需求
- 企业招聘特征分析

### 1.3 技术要求
- **核心技术**: D3.js（必须）
- **辅助技术**: Echarts（推荐）
- **数据处理**: Python（允许用于数据预处理）
- **前端框架**: HTML5 + CSS3 + JavaScript

---

## 二、项目结构规划

```
ChinaVis2024/
│
├── data/                          # 数据文件夹
│   ├── raw/                       # 原始数据
│   │   └── JobWanted.csv
│   ├── processed/                 # 处理后的数据
│   │   ├── city_statistics.json   # 城市统计数据
│   │   ├── salary_analysis.json   # 薪资分析数据
│   │   ├── industry_trends.json   # 行业趋势数据
│   │   └── education_exp.json     # 学历经验相关数据
│   └── geo/                       # 地理数据
│       └── china.json             # 中国地图GeoJSON
│
├── scripts/                       # 数据预处理脚本
│   ├── data_cleaning.py           # 数据清洗
│   ├── data_analysis.py           # 数据分析
│   ├── data_aggregation.py        # 数据聚合
│   └── requirements.txt           # Python依赖
│
├── src/                           # 源代码
│   ├── js/                        # JavaScript文件
│   │   ├── main.js                # 主入口
│   │   ├── d3_visualizations/     # D3可视化模块
│   │   │   ├── geographic_map.js  # 地理分布图（D3实现）
│   │   │   ├── network_graph.js   # 关系网络图（D3实现）
│   │   │   ├── tree_map.js        # 树状图（D3实现）
│   │   │   └── force_layout.js    # 力导向图（D3实现）
│   │   ├── echarts_charts/        # Echarts图表模块
│   │   │   ├── bar_chart.js       # 柱状图
│   │   │   ├── line_chart.js      # 折线图
│   │   │   └── scatter_chart.js   # 散点图
│   │   └── utils/                 # 工具函数
│   │       ├── data_loader.js     # 数据加载
│   │       ├── color_scale.js     # 颜色映射
│   │       └── formatters.js      # 数据格式化
│   │
│   ├── css/                       # 样式文件
│   │   ├── main.css               # 主样式
│   │   ├── charts.css             # 图表样式
│   │   └── responsive.css         # 响应式设计
│   │
│   └── index.html                 # 主页面
│
├── docs/                          # 文档
│   ├── 报告.md                    # 项目报告
│   ├── 设计文档.md                # 设计文档
│   └── 开发日志.md                # 开发日志
│
├── assets/                        # 资源文件
│   ├── images/                    # 图片资源
│   └── fonts/                     # 字体资源
│
└── README.md                      # 项目说明

```

---

## 三、可视化方案设计（What-Why-How）

### 3.1 数据抽象（What）

#### 数据类型分析
| 字段 | 数据类型 | 属性类型 | 值域 |
|------|---------|---------|------|
| JobTitle | 分类数据 | 项（Item） | 169,540种职位 |
| city | 分类数据 | 项（Item） | 371个行政区划 |
| salary | 定量数据 | 属性（Attribute） | 薪资区间 |
| experience | 顺序数据 | 属性（Attribute） | 经验等级 |
| education | 顺序数据 | 属性（Attribute） | 学历等级 |
| company | 分类数据 | 项（Item） | 267,296家企业 |
| companyType | 分类数据 | 属性（Attribute） | 158个行业类别 |

#### 衍生数据
- **地理聚合**: 城市级别的招聘数量、平均薪资
- **时间序列**: （如果有时间戳）招聘趋势变化
- **关联关系**: 行业-城市关联、学历-薪资关联
- **统计指标**: 最高薪资、平均薪资、中位数、标准差

### 3.2 任务抽象（Why）

#### 核心分析任务
1. **概览（Overview）**: 整体就业市场全貌
   - 全国招聘热力分布
   - 行业招聘数量排名
   - 薪资水平整体分布

2. **比较（Compare）**: 多维度对比分析
   - 不同城市的薪资水平对比
   - 不同行业的人才需求对比
   - 学历/经验对薪资的影响对比

3. **关联（Correlate）**: 探索变量间关系
   - 学历与薪资的相关性
   - 经验与薪资的相关性
   - 行业与地域的关联模式

4. **分布（Distribution）**: 数据分布特征
   - 薪资分布情况
   - 职位需求分布
   - 企业规模分布

5. **排序（Rank）**: 排名分析
   - TOP城市招聘数量
   - 高薪行业排名
   - 热门职位排名

### 3.3 实现方案设计（How）

#### 可视化编码设计

##### 1. 地理热力图（D3.js实现）
**目标**: 展示全国招聘市场的地理分布特征
- **Visual Mark**: 地图区域
- **Visual Channel**: 
  - 颜色编码: 招聘数量（颜色深浅）
  - 面积: 行政区域大小
- **交互**: 鼠标悬停显示详情、点击进入城市详情页
- **D3技术点**: 
  - `d3.geoPath()` 地理投影
  - `d3.scaleQuantize()` 颜色映射
  - `d3.zoom()` 缩放交互

##### 2. 行业-薪资桑基图（D3.js实现）
**目标**: 展示行业、学历、薪资之间的流动关系
- **Visual Mark**: 流动带
- **Visual Channel**: 
  - 宽度: 数量规模
  - 颜色: 行业分类
- **交互**: 高亮关联路径
- **D3技术点**: 
  - `d3.sankey()` 桑基图布局
  - 路径动画效果
  - 交互式过滤

##### 3. 薪资-经验散点图（Echarts实现）
**目标**: 分析薪资与工作经验的关系
- **Visual Mark**: 点
- **Visual Channel**: 
  - X轴: 工作经验
  - Y轴: 薪资水平
  - 颜色: 学历水平
  - 大小: 招聘数量
- **交互**: 框选、缩放
- **技术要点**: 
  - 大数据量优化
  - 聚类显示

##### 4. 行业招聘雷达图（Echarts实现）
**目标**: 多维度对比不同行业的特征
- **Visual Mark**: 雷达区域
- **Visual Channel**: 
  - 半径: 各维度数值
  - 颜色: 不同行业
- **维度**: 招聘数量、平均薪资、学历要求、经验要求
- **交互**: 行业切换

##### 5. 职位分类树图（D3.js实现）
**目标**: 层级展示职位分类结构
- **Visual Mark**: 矩形
- **Visual Channel**: 
  - 面积: 职位数量
  - 颜色: 薪资水平
- **交互**: 点击深入、面包屑导航
- **D3技术点**: 
  - `d3.hierarchy()` 层级数据
  - `d3.treemap()` 树图布局
  - 动画过渡

##### 6. 企业-行业网络图（D3.js实现）
**目标**: 展示企业与行业的关联网络
- **Visual Mark**: 节点和连线
- **Visual Channel**: 
  - 节点大小: 企业规模
  - 连线粗细: 关联强度
  - 颜色: 行业分类
- **交互**: 拖拽节点、搜索定位
- **D3技术点**: 
  - `d3.forceSimulation()` 力导向布局
  - 碰撞检测
  - 性能优化

---

## 四、技术栈详细说明

### 4.1 核心技术

#### D3.js (v7)
```javascript
// 主要使用的D3模块
- d3-selection: DOM操作
- d3-scale: 数据映射
- d3-geo: 地理可视化
- d3-hierarchy: 层级数据
- d3-force: 力导向布局
- d3-shape: 图形生成
- d3-transition: 动画过渡
- d3-zoom: 缩放交互
```

#### Echarts (v5)
```javascript
// 主要图表类型
- bar: 柱状图
- line: 折线图
- scatter: 散点图
- radar: 雷达图
- parallel: 平行坐标系
```

#### Python数据处理
```python
# 主要库
- pandas: 数据清洗和处理
- numpy: 数值计算
- json: 数据格式转换
```

### 4.2 开发环境
- **IDE**: VS Code
- **浏览器**: Chrome (推荐) / Firefox
- **本地服务器**: Live Server / Python HTTP Server
- **版本控制**: Git

---

## 五、开发计划（4周）

### 第1周：数据预处理与环境搭建
**时间**: 2024-12-26 至 2025-01-02

#### 任务清单
- [x] 分析数据结构
- [ ] 编写Python数据清洗脚本
  - 处理缺失值
  - 统一数据格式
  - 异常值检测与处理
- [ ] 数据聚合与统计
  - 城市级别聚合
  - 行业统计分析
  - 薪资区间处理
- [ ] 生成JSON数据文件
- [ ] 搭建项目基础结构
- [ ] 配置开发环境

#### 产出
- `data/processed/` 下的所有JSON文件
- 完整的项目文件结构
- 数据处理文档

---

### 第2周：D3核心可视化开发
**时间**: 2025-01-03 至 2025-01-09

#### 任务清单
- [ ] 地理热力图实现
  - 获取中国地图GeoJSON数据
  - D3地理投影设置
  - 颜色映射与图例
  - 交互功能（hover, click）
- [ ] 桑基图实现
  - 数据流转换
  - 布局计算
  - 动画效果
- [ ] 树图实现
  - 层级数据处理
  - treemap布局
  - 钻取功能
- [ ] 力导向图实现
  - 节点和连线数据准备
  - 力导向布局调优
  - 交互优化

#### 产出
- 4个D3可视化组件
- 组件使用文档

---

### 第3周：Echarts图表与整合
**时间**: 2025-01-10 至 2025-01-16

#### 任务清单
- [ ] Echarts图表实现
  - 散点图（薪资-经验）
  - 雷达图（行业对比）
  - 柱状图（排名）
  - 折线图（趋势）
- [ ] 主页面布局设计
  - 响应式布局
  - 导航菜单
  - 图表容器
- [ ] 数据联动实现
  - 跨图表筛选
  - 联动高亮
  - 数据更新机制
- [ ] 性能优化
  - 大数据量优化
  - 懒加载
  - 防抖节流

#### 产出
- 完整的可视化系统
- 交互联动功能

---

### 第4周：完善与报告撰写
**时间**: 2025-01-17 至 2025-01-23

#### 任务清单
- [ ] 视觉优化
  - 色彩方案调整
  - 字体和排版
  - 动画效果优化
- [ ] 用户体验优化
  - 加载提示
  - 错误处理
  - 操作引导
- [ ] 浏览器兼容性测试
- [ ] 代码注释与文档
- [ ] 报告撰写
  - 选题概述
  - 可视方案设计
  - 实现过程及关键代码
  - 结果分析与总结
- [ ] 准备演示材料

#### 产出
- 最终可视化作品
- 完整项目报告
- 演示PPT（如需要）
- 提交压缩包

---

## 六、报告结构规划

### 报告文件名
```
组号-组员姓名1-组员姓名2.zip
```

### 报告内容（总分100分）

#### 1. 选题概述（10分）
- 研究背景与意义
- 数据集介绍
- 分析目标和预期成果

#### 2. 可视方案设计（What-Why-How）（30分）

##### 2.1 数据抽象（What）
- 数据类型分析
- 数据属性识别
- 衍生数据设计

##### 2.2 任务抽象（Why）
- 用户需求分析
- 分析任务定义
- 洞察目标设定

##### 2.3 实现方案设计（How）
- 可视化编码方案
- 视觉通道映射
- 交互设计方案
- 技术选型理由

#### 3. 实现过程及其关键代码（50分）

##### 3.1 数据预处理
- 数据清洗流程
- 关键Python代码

##### 3.2 D3可视化实现
- 地理热力图核心代码
- 桑基图实现细节
- 树图布局代码
- 力导向图优化

##### 3.3 Echarts图表实现
- 散点图配置
- 雷达图实现
- 图表联动代码

##### 3.4 交互功能实现
- 数据筛选机制
- 联动更新逻辑
- 动画效果实现

##### 3.5 性能优化
- 大数据量处理
- 渲染优化策略

#### 4. 结果分析与总结（10分）
- 可视化效果展示
- 数据洞察总结
- 关键发现
- 项目反思
- 改进方向

---

## 七、关键技术难点与解决方案

### 7.1 大数据量可视化
**问题**: 43万条数据直接渲染会导致性能问题

**解决方案**:
- 数据聚合：预先在Python中聚合统计
- 分层加载：根据缩放级别加载不同精度数据
- Canvas渲染：对于大量点使用Canvas代替SVG
- 虚拟滚动：长列表使用虚拟滚动技术

### 7.2 D3与Echarts协同
**问题**: 两个库的坐标系统和事件机制不同

**解决方案**:
- 统一数据格式：建立中间数据层
- 事件总线：自定义事件系统实现跨图表通信
- 容器隔离：每个图表独立容器，避免冲突

### 7.3 交互联动
**问题**: 多个图表间的数据联动和状态同步

**解决方案**:
```javascript
// 事件总线模式
const EventBus = {
  listeners: {},
  on(event, callback) { ... },
  emit(event, data) { ... }
};

// 使用示例
EventBus.on('filterCity', (city) => {
  // 更新所有图表
});
```

### 7.4 地图投影与数据匹配
**问题**: 城市代码与GeoJSON数据匹配

**解决方案**:
- 建立城市代码映射表
- 数据预处理阶段统一编码
- 提供手动映射配置

---

## 八、数据处理流程

### 8.1 数据清洗
```python
# 1. 处理薪资字段
# "5-10K" -> min: 5000, max: 10000
# "15-30K·15薪" -> min: 15000, max: 30000, months: 15
# "面议" -> 标记为null或使用中位数

# 2. 统一经验编码
# EdD, Eqh, Eas, EzN, Eby, EKk -> 转换为数字等级

# 3. 统一学历编码  
# GI, Gx, GP -> 转换为学历等级

# 4. 解析城市代码
# K445 -> 具体城市名称
```

### 8.2 数据聚合示例
```python
# 城市级别聚合
city_stats = {
    "city_code": "K445",
    "city_name": "北京",
    "job_count": 5000,
    "avg_salary": 12000,
    "companies": 1200,
    "industries": [...]
}
```

---

## 九、质量保证

### 9.1 代码规范
- ESLint检查
- 统一命名规范
- 注释覆盖率 > 20%

### 9.2 测试
- 浏览器兼容性测试
- 性能测试
- 交互功能测试

### 9.3 文档
- 代码注释
- API文档
- 使用说明

---

## 十、评分标准对照

| 评分项 | 分值 | 对应内容 | 策略 |
|--------|------|---------|------|
| 选题概述 | 10分 | 报告第一部分 | 清晰阐述研究价值和目标 |
| 数据抽象 | 10分 | What部分 | 详细的数据类型分析表 |
| 任务抽象 | 10分 | Why部分 | 明确的分析任务定义 |
| 实现方案 | 10分 | How部分 | 完整的编码设计文档 |
| D3实现 | 30分 | 核心D3代码 | 4个复杂D3可视化组件 |
| 辅助实现 | 10分 | Echarts代码 | 图表互补D3不足 |
| 交互功能 | 10分 | 联动代码 | 丰富的交互体验 |
| 结果分析 | 10分 | 报告最后部分 | 数据洞察和反思 |

---

## 十一、参考资源

### 学习资源
- [D3.js官方文档](https://d3js.org/)
- [Observable D3示例](https://observablehq.com/@d3)
- [Echarts官方文档](https://echarts.apache.org/)
- [数据可视化最佳实践](https://www.visual-literacy.org/)

### 数据资源
- [中国地图GeoJSON](https://datav.aliyun.com/portal/school/atlas/area_selector)
- [Color Brewer](https://colorbrewer2.org/) - 颜色方案

### 工具
- [JSON Editor Online](https://jsoneditoronline.org/)
- [D3 Graph Gallery](https://d3-graph-gallery.com/)

---

## 十二、注意事项

1. **D3为主**: 确保核心可视化由D3实现，Echarts仅作辅助
2. **避免过度集成**: 不使用现成的可视化模板，展示底层知识
3. **注释要充分**: 关键代码必须有详细注释，说明实现原理
4. **报告要规范**: 严格按照"组号-姓名"格式命名
5. **备份数据**: 定期备份代码和数据
6. **时间管理**: 严格按照4周计划执行，留出缓冲时间

---

## 联系与协作

- **项目负责人**: [待填写]
- **组员**: [待填写]
- **进度追踪**: 使用Git提交记录
- **问题讨论**: 在docs/开发日志.md中记录

---

*本文档将随项目进展持续更新*

*最后更新时间: 2025-12-26*
